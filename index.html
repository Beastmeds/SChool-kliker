<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Game Hub â€” Ultimate School Games</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
:root{--accent:#6e00ff;--accent2:#00c3ff;--glass:rgba(255,255,255,0.08);--glass-2:rgba(0,0,0,0.12);}*
{box-sizing:border-box;font-family:'Poppins',Arial,sans-serif}
body{margin:0;min-height:100vh;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;display:flex;align-items:center;justify-content:center}
.container{width:100%;max-width:1100px;padding:24px}
.header{display:flex;align-items:center;gap:20px}
.logo{width:72px;height:72px;border-radius:14px;background:#fff;color:#000;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px}
.h-title{font-size:28px;margin:0}
.card{background:var(--glass);border-radius:16px;padding:20px;box-shadow:0 8px 30px rgba(0,0,0,0.35);backdrop-filter:blur(6px)}
.row{display:flex;gap:16px}
.col{flex:1}
.center{text-align:center}
.btn{padding:12px 18px;border-radius:12px;border:none;background:rgba(255,255,255,0.12);color:#fff;cursor:pointer;font-weight:600}
.btn:hover{transform:translateY(-3px)}
#gameSelection .option{display:inline-block;margin:10px}
#startScreen img{width:220px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.45)}
/* Game UI */
#gameUI{display:none;flex-direction:column;align-items:center;gap:10px;padding:28px;border-radius:16px}
#clickBtn{padding:22px 48px;border-radius:18px;border:none;background:linear-gradient(90deg,#ffd54a,#ffb300);color:#000;font-weight:800;font-size:22px}
.small{font-size:14px;opacity:0.9}
.controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.settingsPanel{display:none;padding:20px;border-radius:12px;margin-top:10px;background:var(--glass-2)}
.select{padding:8px;border-radius:10px;border:none}
/* Runner */
#runner{display:none;position:relative;overflow:hidden;border-radius:12px;background:linear-gradient(180deg,#72c2ff,#0056b3);height:320px}
#player{position:absolute;left:60px;bottom:40px;width:60px;height:60px;background:#fff;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:28px}
.obstacle{position:absolute;width:40px;height:40px;background:#ff4646;border-radius:8px;right:0}
/* responsive */
@media(max-width:700px){.header{flex-direction:column;align-items:flex-start}.logo{width:56px;height:56px}.h-title{font-size:20px}.container{padding:12px}}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="logo">USG</div>
    <div>
      <h1 class="h-title">Ultimate School Games â€” Game Hub</h1>
      <div class="small">Spiele, passe an, speichere â€” direkt im Browser oder mit Login</div>
    </div>
  </div>

  <div class="card" id="mainCard">
    <!-- Game selection -->
    <div id="gameSelection" class="center">
      <h2>ğŸ® WÃ¤hle ein Spiel</h2>
      <div>
        <button class="btn option" onclick="openStart('clicker')">ğŸ« Ultimate School Clicker Deluxe</button>
        <button class="btn option" onclick="openStart('runner')">ğŸƒ School Runner (Neu)</button>
        <button class="btn option" onclick="openStart('quiz')">ğŸ§  Meme-Quiz (Coming Soon)</button>
      </div>
      <p class="small">Weitere Spiele kannst du spÃ¤ter hinzufÃ¼gen â€” sie erscheinen im MenÃ¼.</p>
    </div>

    <!-- Start screen -->
    <div id="startScreen" style="display:none;" class="center">
      <h2 id="startTitle">Spiel</h2>
      <img id="startImage" src="https://i.imgur.com/4AiXzf8.jpeg" alt="cover" />
      <div style="margin-top:14px">
        <button class="btn" onclick="enterSettings()">âš™ï¸ Einstellungen</button>
        <button class="btn" onclick="beginGame()">â–¶ï¸ Spiel Starten</button>
        <button class="btn" onclick="backToMenu()">â¬…ï¸ ZurÃ¼ck</button>
      </div>
    </div>

    <!-- Settings -->
    <div id="settingsMenu" class="settingsPanel card" style="display:none;">
      <h3>âš™ï¸ Einstellungen</h3>
      <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
        <div>
          <label class="small">ğŸµ Musik</label><br>
          <input id="volSlider" type="range" min="0" max="1" step="0.05" value="0.3" />
        </div>
        <div>
          <label class="small">ğŸ­ Skin</label><br>
          <select id="skinSelect" class="select">
            <option value="schueler">ğŸ§‘â€ğŸ“ SchÃ¼ler</option>
            <option value="lehrer">ğŸ‘¨â€ğŸ« Lehrer</option>
            <option value="direktor">ğŸ‘¨â€ğŸ’¼ Direktor</option>
            <option value="ninja">ğŸ¥· Ninja</option>
          </select>
        </div>
        <div>
          <label class="small">ğŸ–¼ï¸ Hintergrund-Pack</label><br>
          <select id="bgSelect" class="select">
            <option value="school">ğŸ« Schul-Memes</option>
            <option value="funny">ğŸ˜‚ Lustige Memes</option>
            <option value="landscape">ğŸŒ„ Landschaften</option>
            <option value="gaming">ğŸ® Gaming</option>
            <option value="custom">â­ Eigenes Bild (upload)</option>
          </select>
        </div>
        <div>
          <label class="small">ğŸ”¥ Effekte</label><br>
          <select id="effectsSelect" class="select"><option value="on">An</option><option value="off">Aus</option></select>
        </div>
        <div>
          <label class="small">ğŸ“± Vibration</label><br>
          <select id="vibSelect" class="select"><option value="on">An</option><option value="off">Aus</option></select>
        </div>
      </div>
      <div style="margin-top:12px">
        <button class="btn" onclick="applySettings()">âœ”ï¸ Speichern</button>
        <button class="btn" onclick="resetSettings()">â†º ZurÃ¼cksetzen</button>
      </div>
      <div style="margin-top:12px">
        <label class="small">ğŸ” Admin Login:</label>
        <input id="adminPw" type="password" placeholder="Passwort" style="padding:8px;border-radius:8px;border:none;margin-left:8px" />
        <button class="btn" onclick="doAdminLogin()">Login</button>
      </div>
    </div>

    <!-- Game UI container (Clicker) -->
    <div id="gameUI" class="card center" style="display:none;">
      <h2 id="gameTitle">Ultimate School Clicker Deluxe</h2>
      <div id="statusRow" class="row" style="align-items:center;justify-content:center;gap:16px;margin-bottom:8px">
        <div id="counter">Klicks: 0</div>
        <div id="highscore">ğŸ† Highscore: 0</div>
        <div id="levelBox">Level 1 â€“ XP: 0</div>
      </div>

      <button id="clickBtn">KLICK MICH!</button>

      <div class="controls" style="margin-top:12px">
        <button class="btn" id="shopBtn">ğŸ›’ Shop</button>
        <button class="btn" id="prestigeBtn">ğŸŒŸ Prestige</button>
        <button class="btn" id="bossBtn">âš”ï¸ Boss Fight (manuell)</button>
        <button class="btn" id="saveBtn">ğŸ’¾ Spiel speichern</button>
        <button class="btn" id="logoutBtn">ğŸ”“ Logout (falls eingeloggt)</button>
      </div>

      <div id="shopPanel" style="display:none;margin-top:12px" class="card">
        <h4>Shop</h4>
        <div class="small">Upgrade: +1 Multiplier â€” Preis: 50 Klicks</div>
        <button class="btn" onclick="buyUpgrade()">Kaufen</button>
        <button class="btn" onclick="closeShop()">SchlieÃŸen</button>
      </div>
    </div>

    <!-- Runner game -->
    <div id="runnerUI" class="card center" style="display:none">
      <h2>ğŸƒ School Runner</h2>
      <div id="runner">
        <div id="player">ğŸ™‚</div>
      </div>
      <div style="margin-top:8px">
        <button class="btn" onclick="startRunner()">â–¶ Start Runner</button>
        <button class="btn" onclick="stopRunner()">â¹ Stop</button>
        <div class="small">Tippe / klicke zum springen. Weiche Hindernissen aus!</div>
      </div>
    </div>

  </div>
</div>

<!-- Audio (playlist) -->
<audio id="bg0" src="https://cdn.pixabay.com/download/audio/2023/03/13/audio_54d393ca5f.mp3?filename=gaming-music-143081.mp3" loop></audio>
<audio id="bg1" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_58a6b3e2c9.mp3?filename=upbeat-ambient-110362.mp3" loop></audio>
<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6ebadc177e.mp3?filename=click-124467.mp3"></audio>
<audio id="powerSound" src="https://cdn.pixabay.com/download/audio/2022/03/22/audio_6c7dbfad77.mp3?filename=powerup-110248.mp3"></audio>

<script>
// --- State & persistence ---
const state = {
  count: 0,
  highscore: Number(localStorage.getItem('hs')||0),
  multiplier: Number(localStorage.getItem('mult')||1),
  level: Number(localStorage.getItem('level')||1),
  xp: Number(localStorage.getItem('xp')||0),
  skin: localStorage.getItem('skin')||'schueler',
  bgPack: localStorage.getItem('bgPack')||'school',
  effects: localStorage.getItem('effects')||'on',
  vib: localStorage.getItem('vib')||'on',
  prestige: Number(localStorage.getItem('prestige')||0),
  loggedInUser: localStorage.getItem('user')||null
};

// Elements
const gameSelection=document.getElementById('gameSelection');
const startScreen=document.getElementById('startScreen');
const settingsMenu=document.getElementById('settingsMenu');
const gameUI=document.getElementById('gameUI');
const runnerUI=document.getElementById('runnerUI');
const startTitle=document.getElementById('startTitle');
const startImage=document.getElementById('startImage');
const clickBtn=document.getElementById('clickBtn');
const counter=document.getElementById('counter');
const highscore=document.getElementById('highscore');
const levelBox=document.getElementById('levelBox');
const bg0=document.getElementById('bg0');
const bg1=document.getElementById('bg1');
const volSlider=document.getElementById('volSlider');
const skinSelect=document.getElementById('skinSelect');
const bgSelect=document.getElementById('bgSelect');
const effectsSelect=document.getElementById('effectsSelect');
const vibSelect=document.getElementById('vibSelect');

// Playlist & music
const playlist=[bg0,bg1]; let curTrack=0; playlist[curTrack].volume=Number(volSlider.value);
playlist.forEach(a=>{a.loop=true});
function playMusic(){playlist[curTrack].play();}
function stopMusic(){playlist.forEach(a=>a.pause());}
playMusic();

volSlider.addEventListener('input',()=>{playlist.forEach(a=>a.volume=Number(volSlider.value)); localStorage.setItem('vol',volSlider.value);});

// Menu navigation
let activeGame=null; // 'clicker' or 'runner'
function openStart(game){activeGame=game; gameSelection.style.display='none'; startScreen.style.display='block';
  startTitle.textContent = game==='clicker' ? 'ğŸ« Ultimate School Clicker Deluxe' : (game==='runner' ? 'ğŸƒ School Runner' : 'Spiel');
  startImage.src = game==='clicker' ? 'https://i.imgur.com/2yaf2wb.jpeg' : 'https://i.imgur.com/b6QKOD4.jpeg';
}
function backToMenu(){startScreen.style.display='none'; gameSelection.style.display='block';}
function beginGame(){startScreen.style.display='none'; if(activeGame==='clicker'){gameUI.style.display='flex'; runnerUI.style.display='none'; initClicker();} else if(activeGame==='runner'){runnerUI.style.display='block'; gameUI.style.display='none'; initRunner();}}
function enterSettings(){startScreen.style.display='none'; settingsMenu.style.display='block';}

// Apply settings
function applySettings(){state.skin = skinSelect.value; state.bgPack = bgSelect.value; state.effects = effectsSelect.value; state.vib = vibSelect.value; localStorage.setItem('skin',state.skin); localStorage.setItem('bgPack',state.bgPack); localStorage.setItem('effects',state.effects); localStorage.setItem('vib',state.vib); alert('Einstellungen gespeichert'); updateBackgroundPack(); settingsMenu.style.display='none'; startScreen.style.display='block';}
function resetSettings(){localStorage.clear(); alert('Einstellungen zurÃ¼ckgesetzt (LocalStorage gelÃ¶scht). Seite neu laden.');}

// Admin
function doAdminLogin(){const pw=document.getElementById('adminPw').value; if(pw==='1234'){localStorage.setItem('admin','true'); alert('Admin aktiviert');} else alert('Falsches Passwort');}

// Background packs
const packs={
  school:['https://i.imgur.com/4AiXzf8.jpeg','https://i.imgur.com/b6QKOD4.jpeg','https://i.imgur.com/2yaf2wb.jpeg'],
  funny:['https://i.imgur.com/3G3wX2h.jpeg','https://i.imgur.com/eV6Y7qS.jpeg','https://i.imgur.com/9J3M6bL.jpeg'],
  landscape:['https://i.imgur.com/WfP2Q6i.jpeg','https://i.imgur.com/0Dcnj8U.jpeg','https://i.imgur.com/8K3s9zH.jpeg'],
  gaming:['https://i.imgur.com/x8Q1z3b.jpeg','https://i.imgur.com/1l2g5m9.jpeg','https://i.imgur.com/7uT9aK6.jpeg']
};
let bgIndex=0; function updateBackgroundPack(){const pack=state.bgPack; if(pack==='custom') return; document.body.style.backgroundImage = `url(${packs[pack][bgIndex]})`; document.body.style.backgroundSize='cover'; document.body.style.backgroundPosition='center'; bgIndex=(bgIndex+1)%packs[pack].length; setTimeout(updateBackgroundPack,15000);} updateBackgroundPack();

// --- Clicker Game logic ---
function initClicker(){updateDisplay();}
function updateDisplay(){counter.textContent='Klicks: '+state.count; highscore.textContent='ğŸ† Highscore: '+state.highscore; levelBox.textContent=`Level ${state.level} â€“ XP: ${state.xp}`;}

clickBtn.addEventListener('click', (e)=>{document.getElementById('clickSound').currentTime=0; document.getElementById('clickSound').play(); state.count += state.multiplier; if(state.vib==='on' && navigator.vibrate) navigator.vibrate(50); updateDisplay(); gainXP(state.multiplier); if(state.count>state.highscore){state.highscore=state.count; localStorage.setItem('hs',state.highscore);} // powerup chance
if(Math.random()<0.12) activatePowerup();});

function activatePowerup(){const old=state.multiplier; state.multiplier = old + 4; let t=5; document.getElementById('powerSound').play(); const int=setInterval(()=>{t--; if(t<=0){clearInterval(int); state.multiplier=old;}},1000);}

function gainXP(amount){state.xp += amount; if(state.xp >= state.level*50){state.xp = 0; state.level++; alert('ğŸ‰ Level UP! Du bist jetzt Level '+state.level);} localStorage.setItem('level',state.level); localStorage.setItem('xp',state.xp); updateDisplay();}

// Shop & Prestige
function buyUpgrade(){if(state.count>=50){state.count-=50; state.multiplier++; localStorage.setItem('mult',state.multiplier); updateDisplay(); alert('Upgrade gekauft! Multiplier ist jetzt '+state.multiplier);} else alert('Nicht genug Klicks');}
function closeShop(){document.getElementById('shopPanel').style.display='none';}

document.getElementById('shopBtn').addEventListener('click',()=>{document.getElementById('shopPanel').style.display='block';});
document.getElementById('prestigeBtn').addEventListener('click',()=>{if(state.level<10){alert('Level 10 nÃ¶tig fÃ¼r Prestige'); return;} state.prestige++; localStorage.setItem('prestige',state.prestige); state.count=0; state.level=1; state.xp=0; alert('ğŸŒŸ Prestige! Du hast '+state.prestige+' Prestige-Punkte'); updateDisplay();});

document.getElementById('bossBtn').addEventListener('click',()=>{spawnBoss(true);});

// Boss fight (manual or auto)
function spawnBoss(manual=false){if(state.count<100 && !manual){return;} const hp = 12 + Math.floor(state.level/2); let bossHP=hp; alert('âš”ï¸ Boss erscheint! Klicke so schnell du kannst, um ihn zu besiegen (benutze den Haupt-Button). HP='+bossHP);
const listener = ()=>{bossHP--; gainXP(8); if(bossHP<=0){document.removeEventListener('click',listener); alert('ğŸ‰ Boss besiegt! Bonus XP erhalten!');}}
; document.addEventListener('click',listener); if(!manual) setTimeout(()=>{document.removeEventListener('click',listener);},15000);} // auto boss could be scheduled

// Save / Login
document.getElementById('saveBtn').addEventListener('click',()=>{localStorage.setItem('save',JSON.stringify(state)); alert('Spielstand lokal gespeichert');});
document.getElementById('logoutBtn').addEventListener('click',()=>{localStorage.removeItem('user'); state.loggedInUser=null; alert('Ausgeloggt');});

// Optional simple login (GitHub username only, no OAuth in this demo)
function simpleLogin(username){state.loggedInUser = username; localStorage.setItem('user',username); alert('Eingeloggt als '+username+' â€” Spielstand wird jetzt bei Konto-Sperre gesichert.');}

// --- Runner Game implementation (simple) ---
let runnerInterval=null; let obstacles=[]; const runner=document.getElementById('runner'); const player=document.getElementById('player'); let jumping=false; let playerY=40; let gravity=4; let velocity=0; function initRunner(){player.style.bottom=playerY+'px';}
function startRunner(){if(runnerInterval) return; obstacles=[]; runner.innerHTML=''; runner.appendChild(player); player.style.left='60px'; player.style.bottom='40px'; jumping=false; velocity=0; runnerInterval=setInterval(tick,20); document.addEventListener('keydown',onJump); runner.addEventListener('click',onJump);}
function stopRunner(){clearInterval(runnerInterval); runnerInterval=null; document.removeEventListener('keydown',onJump); runner.removeEventListener('click',onJump);}
function onJump(e){if(e.type==='keydown' && e.key!==' ' && e.key!=='ArrowUp') return; if(!jumping){jumping=true; velocity=14;}}
function tick(){// physics
velocity -= 0.8; playerY += velocity; if(playerY<=40){playerY=40; jumping=false; velocity=0;} player.style.bottom = playerY+'px'; // spawn obstacles
if(Math.random()<0.03){spawnObstacle();}
// move obstacles
for(let i=obstacles.length-1;i>=0;i--){const ob=obstacles[i]; ob.x -= 6; ob.el.style.right = ob.x+'px'; if(ob.x>800){} if(ob.x < -80){ob.el.remove(); obstacles.splice(i,1);} // collision
const playerRect = player.getBoundingClientRect(); const obRect = ob.el.getBoundingClientRect(); if(!(playerRect.right < obRect.left || playerRect.left > obRect.right || playerRect.bottom < obRect.top || playerRect.top > obRect.bottom)){
  stopRunner(); alert('ğŸ’¥ Du bist gegen ein Hindernis gelaufen! Score wird als Klicks gutgeschrieben'); // reward
  state.count += 20; updateDisplay(); break; }
}
}
function spawnObstacle(){const el = document.createElement('div'); el.className='obstacle'; el.style.right='-40px'; el.style.bottom='40px'; runner.appendChild(el); obstacles.push({el:el,x: -40}); }

// Mobile improvements: make buttons large, add tap guidance
// Apply initial settings to UI
(function init(){volSlider.value = localStorage.getItem('vol') || 0.3; playlist.forEach(a=>a.volume=Number(volSlider.value)); skinSelect.value = state.skin; bgSelect.value = state.bgPack; effectsSelect.value = state.effects; vibSelect.value = state.vib; updateDisplay(); if(state.loggedInUser){alert('Hallo '+state.loggedInUser);} })();

// Expose simple functions for UI buttons
function openBackgroundMenu(){settingsMenu.style.display='none'; document.getElementById('backgroundMenu')?.remove();}
function changeVolume(){/* handled by slider */}
function cycleSkin(){/* handled in settings */}
function toggleEffects(){state.effects = state.effects === 'on' ? 'off' : 'on'; localStorage.setItem('effects',state.effects); alert('Effekte: '+state.effects);} 
function toggleVibration(){state.vib = state.vib === 'on' ? 'off' : 'on'; localStorage.setItem('vib',state.vib); alert('Vibration: '+state.vib);} 
function adminOptions(){if(localStorage.getItem('admin')==='true') alert('Admin: Cheat +1000 verfÃ¼gbar (im Spiel)'); else alert('Admin nicht aktiviert');}

// Helper to open settings from main
function enterSettingsFromMenu(){gameSelection.style.display='none'; settingsMenu.style.display='block';}

// Simple upload handler (custom background)
function uploadCustomImage(){const input=document.createElement('input'); input.type='file'; input.accept='image/*'; input.onchange=(e)=>{const file=e.target.files[0]; const url=URL.createObjectURL(file); document.body.style.backgroundImage = `url(${url})`; document.body.style.backgroundSize='cover'; document.body.style.backgroundPosition='center'; localStorage.setItem('customBg', url);}; input.click();}

// expose small functions used earlier
window.enterSettings = enterSettings; window.beginGame = beginGame; window.backToMenu = backToMenu; window.openStart = openStart; window.openBackgroundMenu = ()=>{settingsMenu.style.display='none'; document.getElementById('backgroundMenu')?.remove(); const bm = document.createElement('div'); bm.id='backgroundMenu'; bm.className='card'; bm.style.marginTop='12px'; bm.innerHTML = `<h3>Hintergrund wÃ¤hlen</h3><div style="display:flex;gap:8px;flex-wrap:wrap"><button class='btn' onclick="(function(){state.bgPack='school'; localStorage.setItem('bgPack','school'); updateBackgroundPack(); alert('Schul-Pack gewÃ¤hlt')})()">ğŸ« Schul</button><button class='btn' onclick="(function(){state.bgPack='funny'; localStorage.setItem('bgPack','funny'); updateBackgroundPack(); alert('Funny-Pack gewÃ¤hlt')})()">ğŸ˜‚ Funny</button><button class='btn' onclick="(function(){state.bgPack='landscape'; localStorage.setItem('bgPack','landscape'); updateBackgroundPack(); alert('Landscape gewÃ¤hlt')})()">ğŸŒ„ Landschaft</button><button class='btn' onclick="(function(){state.bgPack='gaming'; localStorage.setItem('bgPack','gaming'); updateBackgroundPack(); alert('Gaming gewÃ¤hlt')})()">ğŸ® Gaming</button><button class='btn' onclick="(function(){uploadCustomImage()})()">â­ Eigenes</button></div><div style='margin-top:8px'><button class='btn' onclick="document.getElementById('backgroundMenu').remove(); settingsMenu.style.display='block'">â¬… ZurÃ¼ck</button></div>`; settingsMenu.parentNode.appendChild(bm);} ;

function updateBackgroundPack(){ // immediate update
  const pack = state.bgPack || 'school'; if(pack === 'custom'){ const url = localStorage.getItem('customBg'); if(url) document.body.style.backgroundImage = `url(${url})`; return; } const arr = packs[pack]||packs['school']; document.body.style.backgroundImage = `url(${arr[bgIndex%arr.length]})`; document.body.style.backgroundSize='cover'; document.body.style.backgroundPosition='center'; bgIndex++; setTimeout(updateBackgroundPack,15000);
}

</script>
</body>
</html>
